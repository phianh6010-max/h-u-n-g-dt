<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ki·ªÉm tra b√†i t·∫≠p ‚Äî M√∫n l√†m ch∆∞a?</title>
  <style>
    :root{
      --bg:#0f1724;
      --card:#0b1220;
      --accent:#7c5cff;
      --accent-2:#00d4ff;
      --text:#e6eef8;
      --muted:#9fb0c8;
      --danger:#ff6b6b;
      --success:#6ee7b7;
      --glass: rgba(255,255,255,0.03);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;}
    body{
      background: radial-gradient(1200px 600px at 10% 10%, rgba(124,92,255,0.12), transparent 8%),
                  radial-gradient(1000px 500px at 90% 90%, rgba(0,212,255,0.08), transparent 10%),
                  var(--bg);
      color:var(--text);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .card{
      width:100%;
      max-width:520px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:16px;
      padding:26px;
      box-shadow: 0 10px 30px rgba(2,6,23,0.6);
      border:1px solid rgba(255,255,255,0.03);
      position:relative;
      overflow:hidden;
    }

    h1{margin:0 0 6px;font-size:22px;letter-spacing:0.2px}
    p.lead{margin:0 0 18px;color:var(--muted);font-size:14px}

    label{display:block;font-size:13px;color:var(--muted);margin-bottom:8px}
    input[type="text"]{
      width:100%;
      padding:12px 14px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.04);
      background:var(--glass);
      color:var(--text);
      outline:none;
      font-size:15px;
      transition:transform .12s ease, box-shadow .12s;
    }
    input[type="text"]:focus{box-shadow:0 6px 18px rgba(124,92,255,0.12); transform:translateY(-2px)}

    .controls{display:flex;gap:10px;margin-top:16px}
    button{
      flex:1;
      padding:12px 14px;
      border-radius:10px;
      border:none;
      font-weight:600;
      cursor:pointer;
      font-size:15px;
      transition:transform .12s ease, box-shadow .12s;
      box-shadow: 0 6px 18px rgba(2,6,23,0.4);
    }
    button:active{transform:translateY(1px)}
    .btn-done{background:linear-gradient(90deg,var(--accent),var(--accent-2)); color:#061024}
    .btn-not{background:transparent;color:var(--text);border:1px solid rgba(255,255,255,0.04)}

    .message{
      margin-top:18px;
      padding:14px;
      border-radius:12px;
      background: rgba(255,255,255,0.02);
      color:var(--text);
      display:none;
      align-items:center;
      gap:12px;
    }
    .message.show{display:flex}
    .message .emoji{font-size:22px}

    /* Shake animation for warning */
    @keyframes shake {
      10%, 90% { transform: translate3d(-1px, 0, 0); }
      20%, 80% { transform: translate3d(2px, 0, 0); }
      30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
      40%, 60% { transform: translate3d(4px, 0, 0); }
    }

    .shake{
      animation: shake .6s;
    }

    /* Confetti canvas covers card */
    canvas.confetti {
      position:absolute;
      inset:0;
      pointer-events:none;
    }

    footer.hint{margin-top:14px;color:var(--muted);font-size:12px;text-align:right}
    .small{font-size:12px;color:var(--muted)}
    /* Responsive */
    @media (max-width:520px){
      .card{padding:18px}
      h1{font-size:18px}
      .controls{flex-direction:column}
    }
  </style>
</head>
<body>
  <div class="card" role="region" aria-label="Ki·ªÉm tra b√†i t·∫≠p">
    <canvas class="confetti" id="confettiCanvas"></canvas>

    <h1>Ho√†n th√†nh b√†i ch∆∞a?</h1>
    <p class="lead">Ghi t√™n v√†o r·ªìi ch·ªçn n√∫t ‚Äî h·ªá th·ªëng s·∫Ω ph·∫£n h·ªìi theo l·ª±a ch·ªçn c·ªßa b·∫°n.</p>

    <label for="name">T√™n c·ªßa b·∫°n</label>
    <input id="name" type="text" placeholder="V√≠ d·ª•: H√πng" aria-label="T√™n c·ªßa b·∫°n" />

    <div class="controls" style="margin-bottom:0">
      <button id="btnDone" class="btn-done" aria-pressed="false">M√¨nh l√†m r·ªìi ‚úÖ</button>
      <button id="btnNot" class="btn-not" aria-pressed="false">Ch∆∞a l√†m ‚ùå</button>
    </div>

    <div id="message" class="message" role="status" aria-live="polite">
      <div class="emoji" id="messageEmoji">üéâ</div>
      <div>
        <div id="messageTitle" style="font-weight:700"></div>
        <div id="messageText" class="small"></div>
      </div>
    </div>

    <footer class="hint">L∆∞u √Ω: trang n√†y l∆∞u t√™n trong tr√¨nh duy·ªát ƒë·ªÉ l·∫ßn sau t·ª± ƒë·ªông ƒëi·ªÅn.</footer>
  </div>

  <script>
    // Elements
    const nameInput = document.getElementById('name');
    const btnDone = document.getElementById('btnDone');
    const btnNot = document.getElementById('btnNot');
    const msg = document.getElementById('message');
    const msgEmoji = document.getElementById('messageEmoji');
    const msgTitle = document.getElementById('messageTitle');
    const msgText = document.getElementById('messageText');
    const canvas = document.getElementById('confettiCanvas');

    // Load saved name
    try {
      const saved = localStorage.getItem('homework_name_v1');
      if (saved) nameInput.value = saved;
    } catch(e){ /* ignore */ }

    // Save on change
    nameInput.addEventListener('change', () => {
      try { localStorage.setItem('homework_name_v1', nameInput.value.trim()); } catch(e){}
    });

    // Helpers
    function getName() {
      return nameInput.value.trim() || 'B·∫°n';
    }

    function showMessage({emoji, title, text, danger=false, shake=false}) {
      msgEmoji.textContent = emoji || '';
      msgTitle.textContent = title || '';
      msgText.textContent = text || '';
      msg.classList.add('show');
      msg.classList.toggle('shake', !!shake);
      if (danger) {
        msg.style.borderLeft = '4px solid var(--danger)';
      } else {
        msg.style.borderLeft = '4px solid var(--success)';
      }
      // hide after 6s
      clearTimeout(msg._hideTimeout);
      msg._hideTimeout = setTimeout(() => { msg.classList.remove('show'); msg.classList.remove('shake'); }, 6000);
    }

    // Confetti implementation (simple particle system)
    const ctx = canvas.getContext('2d');
    let DPR = window.devicePixelRatio || 1;
    function resizeCanvas(){
      DPR = window.devicePixelRatio || 1;
      canvas.width = canvas.clientWidth * DPR;
      canvas.height = canvas.clientHeight * DPR;
    }
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    function launchConfetti() {
      const particles = [];
      const W = canvas.width, H = canvas.height;
      const colors = ['#7c5cff','#00d4ff','#ffd166','#6ee7b7','#ff6b6b'];
      const count = 80;
      for (let i=0;i<count;i++){
        particles.push({
          x: (Math.random()*W),
          y: -20 - Math.random()*H*0.2,
          vx: (Math.random()-0.5)*6,
          vy: 2 + Math.random()*6,
          r: 5 + Math.random()*6,
          color: colors[Math.floor(Math.random()*colors.length)],
          rot: Math.random()*360,
          vr: (Math.random()-0.5)*10
        });
      }
      let t = 0;
      function frame(){
        t++;
        ctx.clearRect(0,0,canvas.width,canvas.height);
        for (let p of particles){
          p.x += p.vx * (DPR);
          p.y += p.vy * (DPR);
          p.vy += 0.06 * DPR; // gravity
          p.rot += p.vr;
          ctx.save();
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot * Math.PI/180);
          ctx.fillStyle = p.color;
          ctx.fillRect(-p.r/2, -p.r/2, p.r, p.r*0.6);
          ctx.restore();
        }
        // remove offscreen
        for (let i = particles.length-1; i>=0; i--){
          if (particles[i].y > H + 60*DPR) particles.splice(i,1);
        }
        if (particles.length>0 && t<300) requestAnimationFrame(frame);
        else ctx.clearRect(0,0,canvas.width,canvas.height);
      }
      requestAnimationFrame(frame);
    }

    // Button handlers
    btnDone.addEventListener('click', () => {
      const name = getName();
      try { localStorage.setItem('homework_name_v1', nameInput.value.trim()); } catch(e){}
      showMessage({
        emoji: 'üèÜ',
        title: `Ch√∫c m·ª´ng ${name}!`,
        text: 'B·∫°n ƒë√£ ho√†n th√†nh b√†i. Gi·ªØ phong ƒë·ªô nh√© üí™',
        danger: false
      });
      launchConfetti();
      btnDone.setAttribute('aria-pressed','true');
      btnNot.setAttribute('aria-pressed','false');
    });

    btnNot.addEventListener('click', () => {
      const name = getName();
      showMessage({
        emoji: '‚è∞',
        title: `Mau l√†m b√†i nhanh l√™n, ${name}!`,
        text: 'ƒê·ª´ng ƒë·ªÉ tr·ªÖ b√†i ‚Äî c·ªë l√™n nh√©!',
        danger: true,
        shake: true
      });
      btnNot.setAttribute('aria-pressed','true');
      btnDone.setAttribute('aria-pressed','false');
    });

    // Accessibility: Enter key on input triggers "M√¨nh l√†m r·ªìi"
    nameInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        btnDone.click();
        e.preventDefault();
      }
    });
  </script>
</body>
</html>
